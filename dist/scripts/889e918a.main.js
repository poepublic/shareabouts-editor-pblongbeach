this.Shareabouts=this.Shareabouts||{},this.Shareabouts.Templates=this.Shareabouts.Templates||{},Handlebars.registerPartial("location-string",Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,j="";return j+="\n  ",e=c.is||a&&a.is,f={hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b},d=e?e.call(a,a&&a.geocodeQuality,"POINT",f):n.call(a,"is",a&&a.geocodeQuality,"POINT",f),(d||0===d)&&(j+=d),j+="\n\n  ",e=c.is||a&&a.is,f={hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b},d=e?e.call(a,a&&a.geocodeQuality,"ADDRESS",f):n.call(a,"is",a&&a.geocodeQuality,"ADDRESS",f),(d||0===d)&&(j+=d),j+="\n\n  ",e=c.is||a&&a.is,f={hash:{},inverse:m.noop,fn:m.program(4,h,b),data:b},d=e?e.call(a,a&&a.geocodeQuality,"ZIP",f):n.call(a,"is",a&&a.geocodeQuality,"ZIP",f),(d||0===d)&&(j+=d),j+="\n\n  ",e=c.is||a&&a.is,f={hash:{},inverse:m.noop,fn:m.program(6,i,b),data:b},d=e?e.call(a,a&&a.geocodeQuality,"CITY",f):n.call(a,"is",a&&a.geocodeQuality,"CITY",f),(d||0===d)&&(j+=d),j+="\n"}function g(a,b){var d,e,f="";return f+="\n    \n    ",(e=c.street)?d=e.call(a,{hash:{},data:b}):(e=a&&a.street,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+", ",(e=c.adminArea5)?d=e.call(a,{hash:{},data:b}):(e=a&&a.adminArea5,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+" ",(e=c.adminArea3)?d=e.call(a,{hash:{},data:b}):(e=a&&a.adminArea3,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"\n  "}function h(a,b){var d,e,f="";return f+="\n    \n    ",(e=c.adminArea5)?d=e.call(a,{hash:{},data:b}):(e=a&&a.adminArea5,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+", ",(e=c.adminArea3)?d=e.call(a,{hash:{},data:b}):(e=a&&a.adminArea3,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+" ",(e=c.postalCode)?d=e.call(a,{hash:{},data:b}):(e=a&&a.postalCode,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"\n  "}function i(a,b){var d,e,f="";return f+="\n    \n    ",(e=c.adminArea5)?d=e.call(a,{hash:{},data:b}):(e=a&&a.adminArea5,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+", ",(e=c.adminArea3)?d=e.call(a,{hash:{},data:b}):(e=a&&a.adminArea3,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="function",l=this.escapeExpression,m=this,n=c.helperMissing;return j=c["if"].call(b,b,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),j||0===j?j:""})),Handlebars.registerPartial("place-name",Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n  ",(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"\n"}function g(a,b){var d,e="";return e+="\n  ",d=c["if"].call(a,a&&a.location,{hash:{},inverse:l.noop,fn:l.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function h(a,b){var e,f="";return f+="\n    ",e=l.invokePartial(d["location-string"],"location-string",a&&a.location,c,d,b),(e||0===e)&&(f+=e),f+="\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var i,j="function",k=this.escapeExpression,l=this;return i=c["if"].call(b,b&&b.name,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),i||0===i?i:""})),this.Shareabouts.Templates["abandoned-bike-form"]=Handlebars.template(function(a,b,c,d,e){function f(){return'\n                    <option value="Submitted via public map">Submitted via public map</option>\n                    <option value="311">311</option>\n                    <option value="311+Alderman">311+Alderman</option>\n                    <option value="Alderman">Alderman</option>\n                    <option value="Bike Parking Staff">Bike Parking Staff</option>\n                    <option value="Phone">Phone</option>\n                    <option value="Mayor">Mayor</option>\n                    '}function g(){return'checked="checked"'}function h(){return'\n                    <option value="">New Report</option>\n                    <option value="Resolved">Resolved</option>\n                    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var i,j,k,l="",m=c.helperMissing,n=this.escapeExpression,o="function",p=this;return l+='    <div class="row">\n      <div class="small-12 columns">\n        <br>\n        <ul class="breadcrumbs">\n          <li><a href="#">Datasets</a></li>\n          <li><a href="#'+n((j=c.currentDataset||b&&b.currentDataset,k={hash:{},data:e},j?j.call(b,"id",k):m.call(b,"currentDataset","id",k)))+'">'+n((j=c.currentDataset||b&&b.currentDataset,k={hash:{},data:e},j?j.call(b,"name",k):m.call(b,"currentDataset","name",k)))+'</a></li>\n          <li class="current"><a href="#">',(j=c.id)?i=j.call(b,{hash:{},data:e}):(j=b&&b.id,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+" </a></li>\n        </ul>\n\n        <form>\n\n          <h1>",i=p.invokePartial(d["place-name"],"place-name",b,c,d,e),(i||0===i)&&(l+=i),l+=' <span class="label secondary radius">Created: <strong>'+n((j=c.formatDateTime||b&&b.formatDateTime,k={hash:{},data:e},j?j.call(b,b&&b.created_datetime,"MMM DD, YYYY [at] H:MM",k):m.call(b,"formatDateTime",b&&b.created_datetime,"MMM DD, YYYY [at] H:MM",k)))+'</strong></span></h1>\n\n          <fieldset>\n            <legend>Place Details</legend>\n\n            <div class="row">\n              <div class="large-8 columns">\n\n                <label>Name <em>(shown on map)</em><input type="text" name="name" value="',(j=c.name)?i=j.call(b,{hash:{},data:e}):(j=b&&b.name,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'"></label>\n                <label>Description <em>(shown on map)</em><textarea rows="6" name="description">',(j=c.description)?i=j.call(b,{hash:{},data:e}):(j=b&&b.description,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'</textarea></label>\n                <label>Source\n                  <select name="private_source">\n                    ',j=c.select||b&&b.select,k={hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e},i=j?j.call(b,b&&b.private_source,k):m.call(b,"select",b&&b.private_source,k),(i||0===i)&&(l+=i),l+='\n                  </select>\n                </label>\n                <label>Source Locator<input type="text" name="private_source_locator" value="',(j=c.private_source_locator)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_source_locator,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'"></label>\n\n              </div><!-- end .columns -->\n\n              <div class="large-4 columns">\n                <label for="visible" class="button secondary expand radius">\n                <input id="visible" type="checkbox" name="visible" ',i=c["if"].call(b,b&&b.visible,{hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e}),(i||0===i)&&(l+=i),l+='> VISIBLE ON MAP</label>\n\n                <label>Location</label>\n                <div class="map"></div>\n\n                <div class="location-details"></div>\n              </div><!-- end .columns -->\n            </div><!-- end .row -->\n\n          </fieldset>\n\n          <fieldset>\n            <legend>Status</legend>\n\n            <div class="row">\n              <div class="large-4 large-push-8 columns">\n\n                <br class="show-for-large-up">\n                <label for="priority" class="button secondary expand radius">\n                  <input id="priority" type="checkbox" name="private_priority" ',i=c["if"].call(b,b&&b.private_priority,{hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e}),(i||0===i)&&(l+=i),l+='> PRIORITY</label>\n\n              </div><!-- end .columns -->\n              <div class="large-8 large-pull-4 columns">\n\n                <label>Status <em>(shown on map)</em>\n                  <select name="status">\n                    ',j=c.select||b&&b.select,k={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},i=j?j.call(b,b&&b.status,k):m.call(b,"select",b&&b.status,k),(i||0===i)&&(l+=i),l+='\n                  </select>\n                </label>\n                <label>Date Visited<input type="text" class="date" name="private_date_visited" value="',(j=c.private_date_visited)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_date_visited,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'"></label>\n                <label>Date Safe for Removal<input type="text" name="private_date_safe_to_remove" value="',(j=c.private_date_safe_to_remove)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_date_safe_to_remove,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'"></label>\n                <label>Date Removed<input type="text" name="private_date_removed" value="',(j=c.private_date_removed)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_date_removed,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'"></label>\n                <label>Date Received by Working Bikes<input type="text" name="private_date_received" value="',(j=c.private_date_received)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_date_received,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'"></label>\n\n\n                </div><!-- end .columns -->\n              </div><!-- end .row -->\n\n          </fieldset>\n\n          <fieldset>\n            <legend>Notes</legend>\n\n            <div class="row">\n              <div class="large-8 columns">\n\n                <label>Public Notes <em>(shown on map)</em><textarea rows="6" name="notes_public">',(j=c.notes_public)?i=j.call(b,{hash:{},data:e}):(j=b&&b.notes_public,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'</textarea></label>\n                <label>Private Notes<textarea rows="6" name="private_notes">',(j=c.private_notes)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_notes,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'</textarea></label>\n                <label>Contractor Notes<textarea rows="6" name="private_contractor_notes">',(j=c.private_contractor_notes)?i=j.call(b,{hash:{},data:e}):(j=b&&b.private_contractor_notes,i=typeof j===o?j.call(b,{hash:{},data:e}):j),l+=n(i)+'</textarea></label>\n\n              </div><!-- end .columns -->\n            </div><!-- end .row -->\n\n          </fieldset>\n\n          <input type="submit" value="Save Changes" class="button large expand">\n\n        </form>\n\n\n      </div>\n    </div>\n'}),this.Shareabouts.Templates["bike-parking-form"]=Handlebars.template(function(a,b,c,d,e){function f(){return'\n                    <option value="Submitted via public map">Submitted via public map</option>\n                    <option value="311">311</option>\n                    <option value="311+Alderman">311+Alderman</option>\n                    <option value="Alderman">Alderman</option>\n                    <option value="Bike Parking Staff">Bike Parking Staff</option>\n                    <option value="Phone">Phone</option>\n                    <option value="Mayor">Mayor</option>\n                    '}function g(){return'checked="checked"'}function h(){return'\n                    <option value="">Not Yet Surveyed</option>\n                    <option value="Approved">Approved</option>\n                    <option value="ApprovedNotSent">Approved and Not Yet Sent</option>\n                    <option value="ApprovedSent">Approved and Sent to Contractor</option>\n                    <option value="Rejected">Rejected</option>\n                    <option value="Existing">Existing</option>\n                    '}function i(){return'\n                    <option value=""></option>\n                    <option value="Residential">Residential</option>\n                    <option value="Private Property">Private Property</option>\n                    <option value="Sufficient Bike Parking">Sufficient Bike Parking</option>\n                    <option value="Insufficient Sidewalk Width">Insufficient Sidewalk Width</option>\n                    <option value="Duplicate Request">Duplicate Request</option>\n                    <option value="No Suitable Surface">No Suitable Surface</option>\n                    <option value="Not Enough Clearance">Not Enough Clearance</option>\n                    <option value="Sidewalk Cafe">Sidewalk Cafe</option>\n                    <option value="Inside a Strip Mall/Shopping Center">Inside a Strip Mall/Shopping Center</option>\n                    '}function j(){return'\n                        <option value=""></option>\n                        <option value="Type B">Type B</option>\n                        <option value="Plaza">Plaza</option>\n                        <option value="Mini-Plaza">Mini-Plaza</option>\n                        <option value="Corral">Corral</option>\n                        <option value="Type A5">Type A5</option>\n                        <option value="Type A3">Type A3</option>\n                        <option value="Other">Other</option>\n                        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var k,l,m,n="",o=c.helperMissing,p=this.escapeExpression,q="function",r=this;return n+='    <div class="row">\n      <div class="small-12 columns">\n        <br>\n        <ul class="breadcrumbs">\n          <li><a href="#">Datasets</a></li>\n          <li><a href="#'+p((l=c.currentDataset||b&&b.currentDataset,m={hash:{},data:e},l?l.call(b,"id",m):o.call(b,"currentDataset","id",m)))+'">'+p((l=c.currentDataset||b&&b.currentDataset,m={hash:{},data:e},l?l.call(b,"name",m):o.call(b,"currentDataset","name",m)))+'</a></li>\n          <li class="current"><a href="#">',(l=c.id)?k=l.call(b,{hash:{},data:e}):(l=b&&b.id,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+" </a></li>\n        </ul>\n\n        <form>\n\n          <h1>",k=r.invokePartial(d["place-name"],"place-name",b,c,d,e),(k||0===k)&&(n+=k),n+=' <span class="label secondary radius">Created: <strong>'+p((l=c.formatDateTime||b&&b.formatDateTime,m={hash:{},data:e},l?l.call(b,b&&b.created_datetime,"MMM DD, YYYY [at] H:MM",m):o.call(b,"formatDateTime",b&&b.created_datetime,"MMM DD, YYYY [at] H:MM",m)))+'</strong></span></h1>\n\n          <fieldset>\n            <legend>Details</legend>\n\n            <div class="row">\n              <div class="large-8 columns">\n\n                <label>Name <em>(shown on map)</em><input type="text" name="name" value="',(l=c.name)?k=l.call(b,{hash:{},data:e}):(l=b&&b.name,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n                <label>Description <em>(shown on map)</em><textarea rows="6" name="description">',(l=c.description)?k=l.call(b,{hash:{},data:e}):(l=b&&b.description,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'</textarea></label>\n                <label>Source\n                  <select name="private_source">\n                    ',l=c.select||b&&b.select,m={hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e},k=l?l.call(b,b&&b.private_source,m):o.call(b,"select",b&&b.private_source,m),(k||0===k)&&(n+=k),n+='\n                  </select>\n                </label>\n                <label>Source Locator<input type="text" name="private_source_locator" value="',(l=c.private_source_locator)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_source_locator,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n\n              </div><!-- end .columns -->\n\n              <div class="large-4 columns">\n                <label for="visible" class="button secondary expand radius">\n                <input id="visible" type="checkbox" name="visible" ',k=c["if"].call(b,b&&b.visible,{hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e}),(k||0===k)&&(n+=k),n+='> VISIBLE ON MAP</label>\n\n                <label>Location</label>\n                <div class="map"></div>\n\n                <div class="location-details"></div>\n              </div><!-- end .columns -->\n            </div><!-- end .row -->\n\n          </fieldset>\n\n          <fieldset>\n            <legend>Status</legend>\n\n            <div class="row">\n              <div class="large-4 large-push-8 columns">\n\n                <br class="show-for-large-up">\n                <label for="priority" class="button secondary expand radius">\n                  <input id="priority" type="checkbox" name="private_priority" ',k=c["if"].call(b,b&&b.private_priority,{hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e}),(k||0===k)&&(n+=k),n+='> PRIORITY</label>\n\n              </div><!-- end .columns -->\n              <div class="large-8 large-pull-4 columns">\n\n                <label>Status <em>(shown on map)</em>\n                  <select name="status">\n                    ',l=c.select||b&&b.select,m={hash:{},inverse:r.noop,fn:r.program(5,h,e),data:e},k=l?l.call(b,b&&b.status,m):o.call(b,"select",b&&b.status,m),(k||0===k)&&(n+=k),n+='\n                  </select>\n                </label>\n                <label>Date Surveyed<input type="text" class="date" name="private_date_surveyed" value="',(l=c.private_date_surveyed)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_date_surveyed,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n                <label>Surveyed By<input type="text" name="private_surveyor" value="',(l=c.private_surveyor)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_surveyor,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n                <label>Rejection Reason <em>(shown on map)</em>\n                  <select name="rejection_reason">\n                    ',l=c.select||b&&b.select,m={hash:{},inverse:r.noop,fn:r.program(7,i,e),data:e},k=l?l.call(b,b&&b.rejection_reason,m):o.call(b,"select",b&&b.rejection_reason,m),(k||0===k)&&(n+=k),n+='\n                  </select>\n                </label>\n                <div class="row">\n                  <div class="columns small-5 medium-3">\n                    <label>Approved Qty<input type="text" name="private_approved_qty" value="',(l=c.private_approved_qty)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_approved_qty,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n                  </div>\n                  <div class="columns small-7 medium-9">\n                    <label>Approved Type\n                      <select name="private_approved_type">\n                        ',l=c.select||b&&b.select,m={hash:{},inverse:r.noop,fn:r.program(9,j,e),data:e},k=l?l.call(b,b&&b.private_approved_type,m):o.call(b,"select",b&&b.private_approved_type,m),(k||0===k)&&(n+=k),n+='\n                      </select>\n                    </label>\n                  </div><!-- end .columns -->\n                </div><!-- end .row -->\n\n                <hr>\n\n                <label>Date Installed<input type="text" name="private_date_installed" value="',(l=c.private_date_installed)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_date_installed,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n                <label>Post-Inspected By<input type="text" name="private_post_inspected_by" value="',(l=c.private_post_inspected_by)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_post_inspected_by,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n                <label>Post-Inspection Results<input type="text" name="private_post_inspection_results" value="',(l=c.private_post_inspection_results)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_post_inspection_results,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'"></label>\n\n                </div><!-- end .columns -->\n              </div><!-- end .row -->\n\n          </fieldset>\n\n          <fieldset>\n            <legend>Notes</legend>\n\n            <div class="row">\n              <div class="large-8 columns">\n\n                <label>Public Notes <em>(shown on map)</em><textarea rows="6" name="notes_public">',(l=c.notes_public)?k=l.call(b,{hash:{},data:e}):(l=b&&b.notes_public,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'</textarea></label>\n                <label>Private Notes<textarea rows="6" name="private_notes">',(l=c.private_notes)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_notes,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'</textarea></label>\n                <label>Contractor Notes<textarea rows="6" name="private_contractor_notes">',(l=c.private_contractor_notes)?k=l.call(b,{hash:{},data:e}):(l=b&&b.private_contractor_notes,k=typeof l===q?l.call(b,{hash:{},data:e}):l),n+=p(k)+'</textarea></label>\n\n              </div><!-- end .columns -->\n            </div><!-- end .row -->\n\n          </fieldset>\n\n          <input type="submit" value="Save Changes" class="button large expand">\n\n        </form>\n\n\n      </div>\n    </div>\n'}),this.Shareabouts.Templates["dataset-list-item"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="row">\n  <div class="medium-8 large-10 columns">\n    <h4><strong>',(g=c.name)?f=g.call(b,{hash:{},data:e}):(g=b&&b.name,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</strong></h4> <a href="',(g=c.dataUrl)?f=g.call(b,{hash:{},data:e}):(g=b&&b.dataUrl,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">Download csv</a>\n  </div><!-- end .columns -->\n  <div class="medium-4 large-2 columns">\n    <a href="#',(g=c.id)?f=g.call(b,{hash:{},data:e}):(g=b&&b.id,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="button expand radius">Manage</a>\n  </div>\n</div>'}),this.Shareabouts.Templates["dataset-list"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'    <div class="row">\n      <div class="small-12 columns">\n        <br>\n        <h1>Datasets</h1>\n\n        <div class="dataset-items"></div>\n\n      </div>\n    </div>\n'}),this.Shareabouts.Templates["header-bar"]=Handlebars.template(function(a,b,c,d,e){function f(){return"hide-for-small-up"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=this;return h+='<nav class="top-bar" data-topbar data-options="sticky_on: large">\n  <ul class="title-area">\n    <li class="name"><h1><a href="#">CDOT | Shareabouts Editor</a></h1></li>\n  </ul>\n  <section class="top-bar-section">\n    <ul class="right">\n      <li class=""><a class="sign-out-link ',g=c["if"].call(b,b&&b.user,{hash:{},inverse:i.program(1,f,e),fn:i.noop,data:e}),(g||0===g)&&(h+=g),h+='" href="#">Sign Out</a></li>\n    </ul>\n  </section>\n</nav>\n'}),this.Shareabouts.Templates["location-details"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var f,g,h,i="",j=c.helperMissing,k=this.escapeExpression,l=this;return i+="<label>Ward: <strong>"+k((g=c["default"]||b&&b["default"],h={hash:{},data:e},g?g.call(b,b&&b.WARD,"Not Yet Assigned",h):j.call(b,"default",b&&b.WARD,"Not Yet Assigned",h)))+"</strong></label>\n<label>Community Area: <strong>"+k((g=c["default"]||b&&b["default"],h={hash:{},data:e},g?g.call(b,b&&b.CommArea,"Not Yet Assigned",h):j.call(b,"default",b&&b.CommArea,"Not Yet Assigned",h)))+"</strong></label>\n<label>Address: <strong>",f=l.invokePartial(d["location-string"],"location-string",b&&b.location,c,d,e),(f||0===f)&&(i+=f),i+="</strong></label>\n"}),this.Shareabouts.Templates.pagination=Handlebars.template(function(a,b,c,d,e){function f(){return'\n  <li class="arrow unavailable"><a href="#">&laquo;</a></li>\n  '}function g(a,b){var d,e,f,g="";return g+='\n  <li class="arrow"><a href="#" data-page="'+r((e=c.subtract||a&&a.subtract,f={hash:{},data:b},e?e.call(a,(d=a&&a.metadata,null==d||d===!1?d:d.page),1,f):q.call(a,"subtract",(d=a&&a.metadata,null==d||d===!1?d:d.page),1,f)))+'">&laquo;</a></li>\n  '}function h(a,b,d){var e,f,g,h="";return h+="\n    ",f=c.is||d&&d.is,g={hash:{},inverse:t.program(8,j,b),fn:t.program(6,i,b),data:b},e=f?f.call(a,(e=d&&d.metadata,null==e||e===!1?e:e.page),a,g):q.call(a,"is",(e=d&&d.metadata,null==e||e===!1?e:e.page),a,g),(e||0===e)&&(h+=e),h+="\n  "}function i(a){var b="";return b+='\n    <li class="current"><a href="#" data-page="'+r(typeof a===s?a.apply(a):a)+'">'+r(typeof a===s?a.apply(a):a)+"</a></li>\n    "}function j(a){var b="";return b+='\n    <li><a href="#" data-page="'+r(typeof a===s?a.apply(a):a)+'">'+r(typeof a===s?a.apply(a):a)+"</a></li>\n    "}function k(){return'\n  <li class="arrow unavailable"><a href="#">&raquo;</a></li>\n  '}function l(a,b){var d,e,f,g="";return g+='\n  <li class="arrow"><a href="#" data-page="'+r((e=c.add||a&&a.add,f={hash:{},data:b},e?e.call(a,(d=a&&a.metadata,null==d||d===!1?d:d.page),1,f):q.call(a,"add",(d=a&&a.metadata,null==d||d===!1?d:d.page),1,f)))+'">&raquo;</a></li>\n  '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n,o,p="",q=c.helperMissing,r=this.escapeExpression,s="function",t=this;return p+='<hr>\n<ul class="pagination">\n  ',n=c.is||b&&b.is,o={hash:{},inverse:t.program(3,g,e),fn:t.program(1,f,e),data:e},m=n?n.call(b,(m=b&&b.metadata,null==m||m===!1?m:m.page),1,o):q.call(b,"is",(m=b&&b.metadata,null==m||m===!1?m:m.page),1,o),(m||0===m)&&(p+=m),p+="\n\n  ",n=c.range||b&&b.range,o={hash:{},inverse:t.noop,fn:t.programWithDepth(5,h,e,b),data:e},m=n?n.call(b,1,(m=b&&b.metadata,null==m||m===!1?m:m.num_pages),o):q.call(b,"range",1,(m=b&&b.metadata,null==m||m===!1?m:m.num_pages),o),(m||0===m)&&(p+=m),p+="\n\n  ",n=c.is||b&&b.is,o={hash:{},inverse:t.program(12,l,e),fn:t.program(10,k,e),data:e},m=n?n.call(b,(m=b&&b.metadata,null==m||m===!1?m:m.page),(m=b&&b.metadata,null==m||m===!1?m:m.num_pages),o):q.call(b,"is",(m=b&&b.metadata,null==m||m===!1?m:m.page),(m=b&&b.metadata,null==m||m===!1?m:m.num_pages),o),(m||0===m)&&(p+=m),p+="\n</ul>\n<hr>"}),this.Shareabouts.Templates["place-list-item"]=Handlebars.template(function(a,b,c,d,e){function f(){return", Ward Name "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var g,h,i,j="",k=this,l="function",m=this.escapeExpression,n=c.helperMissing;return j+='<div class="row">\n  <div class="medium-8 large-10 columns">\n    <h4><strong>',g=k.invokePartial(d["place-name"],"place-name",b,c,d,e),(g||0===g)&&(j+=g),j+="</strong>\n      ",g=c["if"].call(b,b&&b.ward,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(j+=g),j+="<small>(",(h=c.id)?g=h.call(b,{hash:{},data:e}):(h=b&&b.id,g=typeof h===l?h.call(b,{hash:{},data:e}):h),j+=m(g)+')</small></h4>\n    <span class="label secondary radius">Created: <strong>'+m((h=c.formatDateTime||b&&b.formatDateTime,i={hash:{},data:e},h?h.call(b,b&&b.created_datetime,"MMM DD, YYYY [at] H:MM",i):n.call(b,"formatDateTime",b&&b.created_datetime,"MMM DD, YYYY [at] H:MM",i)))+'</strong></span>\n    <span class="label secondary radius">Status: <strong>'+m((h=c["default"]||b&&b["default"],i={hash:{},data:e},h?h.call(b,b&&b.status,"Not Yet Surveyed",i):n.call(b,"default",b&&b.status,"Not Yet Surveyed",i)))+'</strong></span>\n  </div><!-- end .columns -->\n  <div class="medium-4 large-2 columns">\n    <a href="#',(h=c.currentDataset)?g=h.call(b,{hash:{},data:e}):(h=b&&b.currentDataset,g=typeof h===l?h.call(b,{hash:{},data:e}):h),j+=m(g)+"/",(h=c.id)?g=h.call(b,{hash:{},data:e}):(h=b&&b.id,g=typeof h===l?h.call(b,{hash:{},data:e}):h),j+=m(g)+'" class="button expand radius">EDIT</a>\n  </div>\n</div>'}),this.Shareabouts.Templates["place-list"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='    <div class="row">\n      <div class="small-12 columns">\n        <br>\n        <ul class="breadcrumbs">\n          <li><a href="#">Datasets</a></li>\n          <li class="current"><a href="#',(g=c.id)?f=g.call(b,{hash:{},data:e}):(g=b&&b.id,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">',(g=c.name)?f=g.call(b,{hash:{},data:e}):(g=b&&b.name,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</a></li>\n        </ul>\n\n        <h1>Places</h1>\n\n        <div class="pagination-region"></div>\n        <div class="place-list-region"></div>\n        <div class="pagination-region"></div>\n\n      </div>\n    </div>\n'}),this.Shareabouts.Templates["sign-in"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="row">\n  <div class="medium-10 medium-push-1 large-8 large-push-2 columns">\n\n    <h1>Sign In</h1>\n\n    <br>\n\n    <form class="sign-in-form">\n\n      <div class="row collapse">\n        <div class="small-4 large-3 columns">\n          <label for="username" class="prefix">Username</label>\n        </div>\n        <div class="small-8 large-9 columns">\n          <input type="text" id="username">\n        </div>\n      </div>\n\n      <div class="row collapse">\n        <div class="small-4 large-3 columns">\n          <label for="password" class="prefix">Password</label>\n        </div>\n        <div class="small-8 large-9 columns">\n          <input type="password" id="password">\n        </div>\n      </div>\n\n      <div class="row collapse">\n        <div class="small-8 small-push-4 large-9 large-push-3 columns">\n          <button type="submit" class="button sign-in-button expand radius">Sign In</button>\n        </div>\n      </div>\n\n    </form>\n\n\n  </div>\n</div>\n'});var Shareabouts=Shareabouts||{};!function(a){"use strict";Handlebars.registerHelper("currentDataset",function(b,c){return c||(c=b,b=null),a.currentDataset.get(b?b:"id")})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a){"use strict";a.TemplateView=Backbone.Marionette.View.extend({serializeData:function(){return{}},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=Backbone.Marionette.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this}})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a,b){"use strict";a.PaginationView=Backbone.Marionette.ItemView.extend({template:a.Templates.pagination,ui:{pageLink:"a"},events:{"click @ui.pageLink":"handlePageLinkClick"},handlePageLinkClick:function(c){c.preventDefault();var d=b(c.currentTarget),e=parseInt(d.attr("data-page"),10);e&&e!==this.collection.metadata.page&&(this.collection.fetch({reset:!0,data:{include_private:!0,include_invisible:!0,page_size:25,page:parseInt(e,10)||1}}),a.router.navigate(a.currentDataset.get("id")+"/page/"+e))},serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON(),metadata:this.collection.metadata}),a}})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a){"use strict";a.DatasetListItemView=Backbone.Marionette.ItemView.extend({className:"panel radius",template:a.Templates["dataset-list-item"]}),a.DatasetListView=Backbone.Marionette.CompositeView.extend({template:a.Templates["dataset-list"],itemView:a.DatasetListItemView,itemViewContainer:".dataset-items"})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a){"use strict";a.PlaceListItemView=Backbone.Marionette.ItemView.extend({className:"panel radius",template:a.Templates["place-list-item"]}),a.PlaceListView=Backbone.Marionette.CollectionView.extend({itemView:a.PlaceListItemView,itemViewContainer:".place-items"}),a.PlaceListLayout=Backbone.Marionette.Layout.extend({template:a.Templates["place-list"],regions:{paginationRegion:".pagination-region",placeListRegion:".place-list-region"},collectionEvents:{reset:"renderPagination"},renderPagination:function(){this.collection.metadata.num_pages>1?this.paginationRegion.show(new a.PaginationView({collection:this.collection})):this.paginationRegion.close()},onRender:function(){this.placeListRegion.show(new a.PlaceListView({collection:this.collection}))}})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a,b){"use strict";a.HeaderBarView=a.TemplateView.extend({template:a.Templates["header-bar"],events:{"click .sign-out-link":"onSignOutClick"},serializeData:function(){return{user:a.auth.getUserSession()}
},onRender:function(){var c=this;b(a.auth).on("authsuccess",function(a,b){c.$(".sign-out-link").toggleClass("hide-for-small-up",!b)})},onSignOutClick:function(b){b.preventDefault(),a.auth.requestNewUserSession({success:function(){window.location.reload()},error:function(){window.alert("There was an error logging out.\n\nThis is probably a temporary problem.\nPlease try again in a moment.")}})}})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a,b,c){"use strict";a.SignInView=a.TemplateView.extend({template:a.Templates["sign-in"],events:{"submit .sign-in-form":"onSignInFormSubmit"},initialize:function(a){a=a||{},a.redirect&&_.isFunction(a.redirect)||c.error("You must supply a redirect function to the sign in view."),this.redirect=a.redirect},onSignInFormSubmit:function(b){b.preventDefault();var c=this,d=this.$("#username").val(),e=this.$("#password").val();c.$(".error").remove(),c.$(".sign-in-button").attr("disabled","disabled"),a.auth.requestNewUserSession(d,e,{success:function(){c.redirect()},error:function(a){if(400===a.status||401===a.status){var b=a.responseJSON;b.errors.__all__?c.$(".sign-in-form").prepend('<small class="error">Incorrect username or password.</small>'):b.errors.username?c.$("#username").after('<small class="error">You must enter a username.</small>'):b.errors.password&&c.$("#password").after('<small class="error">You must enter a password.</small>')}},complete:function(){c.$(".sign-in-button").removeAttr("disabled")}})}})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a,b,c){"use strict";var d=function(b){var c=function(){var c,d=arguments,e=function(){b.apply(this,d)};c=a.auth.getUserSession(),c?(a.user=c,b.apply(this,d)):a.controller.signin(e)};return c};a.controller={index:function(){c.log("show the index")},signin:function(b){var c=new a.SignInView({redirect:b});a.app.mainRegion.show(c)},datasetList:d(function(){var b=new a.DatasetListView({collection:a.datasetCollection});a.app.mainRegion.show(b)}),placeList:d(function(b,c){a.currentDataset=a.datasetCollection.findWhere({id:b}),a.placeCollection.url=a.currentDataset.get("url")+"/places";var d=new a.PlaceListLayout({model:a.currentDataset,collection:a.placeCollection});a.app.mainRegion.show(d),a.placeCollection.fetch({reset:!0,data:{include_private:!0,include_invisible:!0,page_size:25,page:parseInt(c,10)||1}})}),placeForm:d(function(c,d){a.currentDataset=a.datasetCollection.findWhere({id:c}),a.placeCollection.url=a.currentDataset.get("url")+"/places";var e=a.placeCollection.get(d),f=function(a,c,d,e){b.ajax({url:"https://shareabouts-region-service.herokuapp.com/api/v1/chicago/wards",data:{ll:a+","+c},dataType:"jsonp",success:d,error:e})},g=function(c){var d=b(".save-message"),e="bikeparking"===c.get("location_type")?"bike-parking-form":"abandoned-bike-form",g=new a.PlaceFormView({model:c,collection:a.placeCollection,template:a.Templates[e],silent:!0,include_invisible:!0,success:function(){d.removeClass("alert").addClass("success show"),_.delay(function(){d.removeClass("show")},3e3),g.render(),a.app.mainRegion.show(g)},error:function(){d.removeClass("success").addClass("alert show"),_.delay(function(){d.removeClass("show")},3e3)}});g.on("render",function(){this.$(".location-details").html(a.Templates["location-details"](this.model.toJSON()))}),g.on("show",function(){var b=c.get("geometry").coordinates,d=L.map(g.$(".map").get(0),{layers:[L.tileLayer("http://{s}.tiles.mapbox.com/v3/openplans.map-dmar86ym/{z}/{x}/{y}.png",{attribution:'&copy; OpenStreetMap contributors, CC-BY-SA. <a href="http://mapbox.com/about/maps" target="_blank">Terms &amp; Feedback</a>'})],center:[b[1],b[0]],zoom:15}),e=L.marker([b[1],b[0]],{draggable:!0}).addTo(d);e.on("dragend",function(){var b=e.getLatLng();g.setGeometry({type:"Point",coordinates:[b.lng,b.lat]}),a.Util.MapQuest.reverseGeocode(b,{success:function(b){var d=b.results[0].locations;d.length>0&&(c.set("location",d[0]),g.$(".location-details").html(a.Templates["location-details"](g.model.toJSON())))}},"Fmjtd%7Cluur2g0bnl%2C25%3Do5-9at29u"),f(b.lat,b.lng,function(b){c.set(b),g.$(".location-details").html(a.Templates["location-details"](g.model.toJSON()))},function(){window.alert("Oops, we couldn't update the ward. Move the marker to try again.")})})}),a.app.mainRegion.show(g)};e?g(e):a.placeCollection.fetchById(d,{data:{include_private:!0,include_invisible:!0},success:g,error:function(){window.alert("Place "+d+" can not be found."),a.router.navigate("",{trigger:!0})}})})}}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a){"use strict";a.Router=Backbone.Marionette.AppRouter.extend({controller:a.controller,appRoutes:{"":"datasetList",":dataset_slug":"placeList",":dataset_slug/page/:page":"placeList",":dataset_slug/:place_id":"placeForm"}})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a){"use strict";a.app=new Backbone.Marionette.Application,a.app.addRegions({headerRegion:"#header-region",mainRegion:"#main-region"}),a.app.addInitializer(function(){a.datasetCollection=new Backbone.Collection([{id:"abandoned-bikes",name:"Abandoned Bikes",url:"http://data.shareabouts.org/api/v2/chicagobikes/datasets/chicago-abandoned-bikes",dataUrl:"http://data.shareabouts.org/api/v2/chicagobikes/datasets/chicago-abandoned-bikes/places?include_invisible&include_private&page_size=5000&format=csv"},{id:"bike-parking",name:"Bike Parking",url:"http://data.shareabouts.org/api/v2/chicagobikes/datasets/chicago-bike-parking",dataUrl:"http://data.shareabouts.org/api/v2/chicagobikes/datasets/chicago-bike-parking/places?include_invisible&include_private&page_size=5000&format=csv"}])}),a.app.addInitializer(function(){a.placeCollection=new a.PlaceCollection}),a.app.addInitializer(function(){a.auth=new a.Auth}),a.app.addInitializer(function(){var b=new a.HeaderBarView;a.app.headerRegion.show(b)}),a.app.addInitializer(function(){a.router=new a.Router,Backbone.history.start(),a.router.on("route",function(){window.scrollTo(0,0)})})}(Shareabouts,jQuery,Shareabouts.Util.console);var Shareabouts=Shareabouts||{};!function(a,b){"use strict";b(function(){a.app.start({})})}(Shareabouts,jQuery,Shareabouts.Util.console);